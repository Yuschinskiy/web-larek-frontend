Проект "WEB-ларёк" представляет собой интернет-магазин для веб-разработчиков, в котором пользователи могут просматривать каталог товаров, добавлять их в корзину и оформлять заказы. Цель первой части проекта — спроектировать и задокументировать архитектуру приложения на основе MVP (Model-View-Presenter) с учетом принципов изолированности, единственной ответственности и масштабируемости.

Ниже представлено описание архитектуры, шагов проектирования и типизации данных для последующей реализации.

Проектирование и документирование архитектуры
Используемый стек
TypeScript: для типизации и написания кода.
HTML/CSS: для верстки (предоставлена в стартовом наборе).
JavaScript: для реализации логики приложения.
Webpack/Vite: для сборки проекта (настроено в стартовом наборе).
API-клиент: для взаимодействия с сервером (предоставлен в стартовом наборе).
EventEmitter: брокер событий для связи между компонентами.
Инструкция по сборке и запуску
Клонировать репозиторий из GitHub (или использовать предоставленный стартовый набор).
Установить зависимости с помощью команды npm install.
Запустить проект в режиме разработки с помощью npm start (или другой команды, указанной в стартовом наборе).
Открыть приложение в браузере (обычно по адресу http://localhost:3000).
Принципы архитектуры
Архитектура проекта основана на следующих принципах:

Изолированность: Компоненты (модели, представления, презентеры) независимы друг от друга и взаимодействуют через события или интерфейсы.
Единственная ответственность: Каждый класс или модуль решает одну задачу (например, модель управляет данными, представление — отображением).
Масштабируемость: Архитектура позволяет добавлять новые функции (например, новые типы товаров или шаги оформления заказа) без изменения базового кода.
Используемый паттерн
Для реализации выбрана архитектура MVP (Model-View-Presenter) с использованием брокера событий (EventEmitter) для связи между слоями. Это позволяет разделить логику данных, отображения и управления, а также упрощает тестирование и масштабирование.

                       Карточка товара. 

```
export interface IProduct {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number;
}
```

                       Заказ.

```
export interface IOrder {
  payment: string;
  email: string;
  phone: string;
  address: string;
  total: number;
  items: string[] ;
}
```
                       Успешный заказ.

```
export interface IOrderResult {
  id: string,
  total: number
}
```
                       Модель данных товара.

```
export interface IProductData {
  setProductList(items: IProduct[]): void;
  getProductList(): IProduct[];
  getProductById(id: string): IProduct;
}
```

                 Модель данных заказа.

```
export interface IOrderData {
  productList: TBasketItem[];
  order: IOrder;
  addProduct(item: TBasketItem): void;
  deleteProduct(idProduct: string): void;
  getTotal(): number;
}
```

Id карточки для просмтора подробной информации
```
export type TProductId = Pick<IProduct, 'id'>;
```
Карточеки в корзине.
```
export type TBasketItem = Pick<IProduct, 'id' | 'title' | 'price'>;
```
Данные в форме оплата.
```
export type TOrderPayment  = Pick<IOrder, 'payment' | 'address'>
```
Данные в форме котакты.
```
export type TOrderContacts  = Pick<IOrder, 'email' | 'phone'>
```
Ошибки в формах.
```
export type FormErrors = Partial<Record<keyof IOrder, string>>;
```
           Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP: 
- слой представления, отвечает за отображение данных на странице, 
- слой данных, отвечает за хранение и изменение данных
- презентер, отвечает за связь представления и данных.

Базовый код

// Api
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.
Методы: 
- `get` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер
- `post` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

// EventEmitter
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.  
Основные методы, реализуемые классом описаны интерфейсом `IEvents`:
- `on` - подписка на событие
- `emit` - инициализация события
- `trigger` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие

//Component
Содержит в себе методы для работы с DOM-элементами. Класс наследуют все классы представления. 
- `toggleClass` - удаление/добавления класса DOM-элементу
- `setText` - установить текстовое содержимое
- `setDisabled` - включение/отключение кнопки
- `setHidden` - устанавливает DOM-элементу CSS-свойство display в значение 'none'
- `setVisible` - удаляет CSS-свойство display у элемента
- `setImage` - устанавливает элементу Image значения атрибута src и alt
- `render` - отрисовка DOM-элементов 

// ProductData
Класс отвечает за хранение и логику работы с данными карточек товара.\
Конструктор класса принимает инстант брокера событий\
В полях класса хранятся следующие данные:
- `productList: IProduct[]` - массив объектов карточек товара.
- `events: IEvents` - экземпляр класса `EventEmitter` для инициации событий при изменении данных.

Так же класс предоставляет набор методов для взаимодействия с этими данными.
- `setProductList(productData: IProduct): IProductList`  - устанавливает объект с карточками.  
- `getProductList(): IProduct[]` - получает объект с карточками.
- `getProductById(id: string): IProduct` - получает объект карточки товара по id.

// OrderData
Класс отвечает за хранение и логику работы с данными заказа.\
Конструктор класса принимает инстант брокера событий\
В полях класса хранятся следующие данные:
- `_basket: TBasketItem[]` - товары в корзине
- `_order: IOrder` - данные заказа
- `formErrors` - ошибки при валидации
- `events: IEvents` - экземпляр класса `EventEmitter` для инициации событий при изменении данных.

Так же класс предоставляет набор методов для взаимодействия с этими данными.
- `addProduct(product: TBasketItem)` - добавляет товар в корзину и заказ.
- `deleteProduct(idProduct: string)` - удаляет товар из корзины и заказа.
- `getTotal()` - получить стоимость заказа
- `updateTotal()` - обновить стоимость заказа
- `clearDataForms()` - очистить заказа из форм
- `clearBasket()` - очистить корзину 
- `setOrderField(field: keyof TFormOrder, value: string)` - получить поля и данные введенные данные формы заказа
- `setContactsField(field: keyof TFormContacts, value: string)` - получить поля и данные введенные данные формы контактов
- `validateContacts()` - проверка на валидность полей формы контактов
- `validateOrder()` - проверка на валидность полей формы заказа

// Component
Класс является дженериком и родителем всех компонентов слоя представления. В дженерик принимает тип объекта, в котором данные будут передаваться в метод render для отображения данных в компоненте. В конструктор принимает элемент разметки, являющийся основным родительским контейнером компонента. Содержит метод render, отвечающий за сохранение полученных в параметре данных в полях компонентов через их сеттеры, возвращает обновленный контейнер компонента.\
Методы:
- `toggleClass` - удаление/добавления класса DOM-элементу
- `setText` - установить текстовое содержимое
- `setDisabled` - включение/отключение кнопки
- `setHidden` - устанавливает DOM-элементу CSS-свойство display в значение 'none'
- `setVisible` - удаляет CSS-свойство display у элемента
- `setImage` - устанавливает элементу Image значения атрибута src и alt
- `render` - отрисовка DOM-элементов 

// Modal
Реализует модальное окно. Так же предоставляет методы `open` и `close` для управления отображением модального окна. Устанавливает слушатели на клик в оверлей и кнопку-крестик для закрытия попапа.  
- `constructor(container: HTMLElement, events: IEvents)` Конструктор принимает `container`, в котором будет разметка содержимого модального окна и экземпляр класса `EventEmitter` для возможности инициации событий.

Поля класса
- `modal: HTMLElement` - элемент модального окна
- `events: IEvents` - брокер событий

// ProductCard
Расширяет класс Component. Предназначен для реализации карточек товара на главной странице.
- `constructor(container: HTMLElement, events: IEvents)` Конструктор принимает `container`, в котором будет разметка содержимого модального окна и экземпляр класса `EventEmitter` для возможности инициации событий.\
Поля класса:
- `itemId: string` - id товара
- `_category: HTMLElement`- элемент карточки категория
- `_title: HTMLElement`- элемент карточки заголовок
- `_image: HTMLImageElement`- элемент карточки изображение
- `_price: HTMLElement` - элемент карточки цена
- `_description: HTMLElement` - элемент карточки описание
- `openButton: HTMLButtonElement`- элемент карточки кнопка для открытия карточки

// ProductCardPreview
Расширяет класс ProductCard. При открытии модального окна отображает подробную информацию о товаре и кнопку добавления в корзину или удаления из нее.Предоставляет методы для управления активностью кнопки купить/удалить из корзины.
- `constructor(container: HTMLElement, events: IEvents)` -
конструктор принимает `container`, в котором будет разметка содержимого модального окна и экземпляр класса `EventEmitter` для возможности инициации событий.

Поля класса: 
- `protected _description: HTMLElement`- элемент карточки описание 
- `protected button: HTMLButtonElement` - кнопка купить/удалить из корзины

Методы:
- `buttonStatus(isInBasket: boolean)` - изменение текста на кнопке в зависимости товар в корзине или нет.
- `buttonDisabled(priceless: boolean)` - отключение кнопки, если товар бесценен

// Basket
Расширяет класс Component. Предназначен для реализации модального окна корзина. Отображает список товаров с название и ценой, а так же общей суммой.
- `constructor(container: HTMLElement, events: IEvents)` -
конструктор принимает `container`, в котором будет разметка содержимого модального окна и экземпляр класса `EventEmitter` для возможности инициации событий.

Поля класса:
- `_list: HTMLElement` - список товаров 
- `orderButton: HTMLButtonElement` - кнопка формления заказа
- `_totalPrice: HTMLElement` - общая цена товаров в корзине

// BasketItem
Расширяет класс Component. Предназначен для реализации элемента списка в корзине. Отображает данные товара в корзине. 
- `constructor(container: HTMLElement, events: IEvents)` -
конструктор принимает `container`, в котором будет разметка содержимого модального окна и экземпляр класса `EventEmitter` для возможности инициации событий.

Поля класса:
- `itemId: string` - id товара
- `_count: HTMLElement` - элемент карточки порядковый номер
- `_title: HTMLElement` - элемент карточки название
- `_price: HTMLElement` - элемент карточки цена
- `deleteButton: HTMLButtonElement` - кнопка удаления из корзины

Методы:
- `setCounter(value: number)` - получает порядковый номер товара в корзине

// Page
Расширяет класс Component. Предназначен для реализации главной страницы с карточками товара и иконкой корзины.\
- `constructor(container: HTMLElement, events: IEvents)` -
конструктор принимает `container`, в котором будет разметка содержимого главной страницы и экземпляр класса `EventEmitter` для возможности инициации событий.
Поля класса:
- `elementCounter: HTMLElement` - счетчик количества товара в корзине
- `buttonBasket: HTMLButtonElement` - кнопка корзины
- `galleryCard: HTMLElement` - галерея карточек товара

Методы:
- `setLocked(value: boolean)` - блокирует страницу во время открытия модального окна

// Form
Расширяет класс Component. Реализует форму. Иницилизирует событие, оповещающее об изменении полей. Отправляет данные в модель, по нажатию кнопки sumbit. Изменяте состояние кнопки sumbit, в зависимости от валидности полей.

Поля класса:
- `_submit: HTMLButtonElement` - кнопка отправки данных формы
- `_errors: HTMLElement` - элемент, в котором отображаются ошибки при не валидности полей

Методы:
- `onInputChange(field: keyof T, value: string)` - защещенной метод. Инициализирует событие, при котором передаются данный поля и введенных в него данных.

// FormOrder
Расширяет класс Form. Реализует форму заказа. Устанавливает значение полей. Сбрасывает содержимое полей, при закрытии модального окна.

Поля класса:
- `paymentButtons: NodeListOf<HTMLButtonElement>` - кнопки выбора способа оплаты
- `selectedPayment: string` - переменная, хранящая выбранный метод оплаты

Методы:
- `reset()` - сброс введенных данных формы

// FormOrder

Расширяет класс Form. Реализует форму контактов. Класс отвечает за установку данных полей и сброс (reset) формы при закрытии.

// FormSuccess

Оповещение об успешном оформление заказа и вывод общей суммы заказа.

